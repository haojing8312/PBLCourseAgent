# Feature Specification: UbD-PBL 课程架构师 V3

**Feature Branch**: `001-ubd-pbl-architect-v3`
**Created**: 2025-10-20
**Status**: Draft
**Input**: User description: "升级现有PBL课程生成器为专业的UbD-PBL课程架构师,通过内置UbD理论指导和明确的三阶段流程,帮助教师设计以深度理解为核心、以项目式学习为载体的高质量课程"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 创建完整的UbD-PBL课程方案 (Priority: P1)

教师(新手或专业)使用系统从课程主题开始,通过三个AI辅助的阶段(锚定理解目标 → 设计评估证据 → 规划学习体验),最终生成一份结构完整、理论清晰、可直接使用的UbD-PBL课程方案。

**Why this priority**: 这是产品的核心价值主张,也是用户的主要使用场景。如果这个流程不能完整工作,整个产品就失去意义。

**Independent Test**: 可以通过输入一个课程主题(如"0基础AI编程课程"),完整走完三个阶段,并导出符合模板要求的教案文档来独立测试。交付的文档应包含G/U/Q/K/S、驱动性问题、表现性任务、评估量规和详细的PBL学习蓝图。

**Acceptance Scenarios**:

1. **Given** 教师进入系统主页, **When** 输入课程名称"0基础AI编程课程"和基本信息, **Then** 系统创建新的课程项目并引导进入模块1
2. **Given** 教师在模块1(锚定深刻理解), **When** 查看G/U/Q/K/S输入卡片, **Then** 每个卡片上方显示简短、精炼的解释性文字,帮助理解该项意义
3. **Given** 教师在模块1提交课程基本信息, **When** AI生成G/U/Q/K/S草稿, **Then** 生成内容严格符合UbD定义(U是抽象观点而非具体知识点,S是可迁移技能,K是领域知识等)
4. **Given** 教师完成模块1, **When** 进入模块2(设计评估证据), **Then** AI生成一个核心驱动性问题和分阶段的表现性任务(包含真实情境、挑战、角色和产出物)
5. **Given** 教师完成模块2, **When** 进入模块3(规划PBL学习体验), **Then** AI生成的学习蓝图按PBL经典阶段组织(项目启动→持续探究→原型开发→测试迭代→最终展示),且每个活动标注对应的UbD目标和WHERETO原则
6. **Given** 教师完成所有三个模块, **When** 导出最终教案, **Then** 生成的文档符合规定的Markdown模板格式,包含所有必需章节和内容

---

### User Story 2 - 理解UbD理论并应用于教学设计 (Priority: P2)

教师(特别是新手)在使用系统过程中,通过UI中的引导式说明和AI生成内容的示范,逐步理解UbD逆向设计的三阶段思想,知道"为什么"这样设计课程,从而提升教学设计能力。

**Why this priority**: 这是产品从简单工具升级为"教研伙伴"的关键差异化价值。虽然不是生成教案的必要条件,但能显著提升用户满意度和长期留存。

**Independent Test**: 可以通过用户访谈和问卷调查独立测试:在使用系统前后,教师对UbD核心概念(如"持续理解"、"逆向设计"、"WHERETO原则")的理解程度是否提升。也可通过观察用户是否能独立修改AI生成的内容且保持UbD逻辑一致性。

**Acceptance Scenarios**:

1. **Given** 教师首次使用系统, **When** 进入模块1查看"U: 持续理解"输入卡片, **Then** 卡片上方显示解释:"学生在忘记所有细节后,我们希望他们能永恒记住的核心思想或重要观点是什么?"
2. **Given** 教师查看AI生成的U示例, **When** 对比自己的初始理解, **Then** 能够识别出U应该是抽象观点(如"理解AI技术的双刃剑特性")而非具体知识点(如"掌握Python语法")
3. **Given** 教师完成第一次课程设计, **When** 设计第二个课程时, **Then** 能够更快速准确地填写G/U/Q/K/S,减少对AI修正的依赖
4. **Given** 教师查看模块3的PBL学习蓝图, **When** 看到每个活动旁边标注的UbD目标和WHERETO原则, **Then** 理解每个教学活动的设计意图和理论依据

---

### User Story 3 - 编辑和优化AI生成的课程内容 (Priority: P2)

教师对AI生成的G/U/Q/K/S、驱动性问题、表现性任务或学习蓝图不完全满意时,可以直接在系统中编辑修改,并要求AI基于修改后的内容重新生成下游内容,确保整体课程方案的一致性。

**Why this priority**: 没有AI能一次生成完美内容,编辑能力是实用性的关键。虽然不是MVP的最小核心,但对用户满意度影响很大。

**Independent Test**: 可以通过修改模块1的某个U,然后观察模块2的表现性任务和模块3的学习蓝图是否能联动更新来测试。

**Acceptance Scenarios**:

1. **Given** 教师在模块1查看AI生成的U1, **When** 点击"编辑"按钮并修改文本, **Then** 修改后的内容立即保存并显示
2. **Given** 教师修改了模块1的某个U, **When** 进入模块2, **Then** 系统提示"检测到阶段一的变更,是否重新生成评估设计?"并允许用户选择
3. **Given** 教师在模块3查看某周的活动安排, **When** 手动调整活动顺序或添加新活动, **Then** 系统保持原有的UbD目标标注,或提示用户为新活动关联目标
4. **Given** 教师完成全部编辑, **When** 导出教案, **Then** 最终文档反映所有用户的修改和AI的重新生成结果

---

### User Story 4 - 保存和管理多个课程项目 (Priority: P3)

教师可以保存进行中的课程设计项目,在不同时间继续编辑,并管理多个课程项目(查看列表、搜索、删除、复制)。

**Why this priority**: 这是基本的产品可用性需求,但对MVP的核心价值验证不是必需的。可以在V3.1迭代中完善。

**Independent Test**: 创建多个课程项目,退出系统后重新登录,验证所有项目和进度都被正确保存和恢复。

**Acceptance Scenarios**:

1. **Given** 教师完成模块1, **When** 点击"保存并退出", **Then** 系统保存当前进度并返回项目列表页
2. **Given** 教师在项目列表页, **When** 点击某个未完成的项目, **Then** 系统恢复到上次保存的阶段和内容
3. **Given** 教师在项目列表页, **When** 点击"复制"某个已完成的课程, **Then** 创建一个新项目,内容与源项目相同但可独立编辑
4. **Given** 教师有多个项目, **When** 在搜索框输入关键词, **Then** 列表只显示标题或主题包含该关键词的项目

---

### Edge Cases

- **模块间依赖性**: 用户跳过模块1直接进入模块2时,系统应提示"需要先完成阶段一"或提供模板数据
- **AI生成失败**: 当AI服务不可用或生成内容为空时,系统应显示明确错误信息,并允许用户手动输入或稍后重试
- **内容过长截断**: 用户输入的课程描述或AI生成的内容超出UI显示限制时,应提供滚动或"展开全文"功能
- **理论对齐失败**: AI生成的U实际上是知识点而非理解时,系统应有内置验证逻辑提示用户或自动重新生成
- **多语言和特殊字符**: 课程名称包含emoji或非拉丁字符时,导出的Markdown文件应正确编码
- **并发编辑**: 同一用户在不同设备或标签页同时编辑同一项目时,系统应检测冲突或采用"最后写入胜出"策略
- **空状态处理**: 新用户首次登录时项目列表为空,应显示引导性提示(如"创建你的第一个UbD-PBL课程")

## Requirements *(mandatory)*

### Functional Requirements

#### 模块1: 锚定深刻理解 (UbD阶段一)

- **FR-001**: 系统必须在G/U/Q/K/S每个输入卡片上方显示简短、精炼的解释性文字,说明该项的UbD定义和意义
- **FR-002**: 系统必须根据用户输入的课程名称和基本信息,调用AI生成符合UbD定义的G/U/Q/K/S草稿
- **FR-003**: AI生成的U必须是抽象的、可迁移的理解(big ideas),而非具体的知识点或技能
- **FR-004**: AI生成的Q必须是开放性的、能引发深度思考的基本问题(essential questions)
- **FR-005**: AI生成的K和S必须明确区分:K是领域知识(know what),S是可迁移技能(know how/be able to do)
- **FR-006**: 用户必须能够编辑AI生成的G/U/Q/K/S任何内容,并保存修改

#### 模块2: 设计评估证据 (UbD阶段二)

- **FR-007**: 系统必须基于模块1的G/U/Q/K/S,生成一个核心的、贯穿始终的驱动性问题(Driving Question)
- **FR-008**: 驱动性问题必须具备PBL属性:真实情境、开放性挑战、明确的最终产出物
- **FR-009**: 系统必须生成分阶段的表现性任务(Performance Tasks),作为解决驱动性问题的关键里程碑
- **FR-010**: 每个表现性任务必须包含:任务描述、真实情境、学生角色、产出物、评估标准(rubric维度)
- **FR-011**: 系统必须为主要表现性任务生成详细的评估量规(Rubric),包含多个维度和4-5个评分等级
- **FR-012**: 系统必须生成"其他评估证据"列表(如观察记录、测验、反思日志等)
- **FR-013**: 用户必须能够编辑驱动性问题、表现性任务和评估量规

#### 模块3: 规划PBL学习体验 (UbD阶段三)

- **FR-014**: 系统必须按PBL经典阶段组织学习蓝图:项目启动→知识与技能构建→开发与迭代→成果展示与反思
- **FR-015**: 每个PBL阶段必须包含详细的逐日或逐周活动安排(保留原有方案的详细性)
- **FR-016**: 每个关键活动旁边必须标注其服务的UbD目标(如"服务于U1, S2, K3")
- **FR-017**: 每个关键活动旁边必须标注其对应的WHERETO原则(如"[H-Hook]"、"[E-Explore]"等)
- **FR-018**: 系统必须确保学习活动与模块2的表现性任务时间点对齐(如"第3周提交任务1")
- **FR-019**: 用户必须能够调整活动顺序、添加或删除活动,并手动关联UbD目标和WHERETO原则

#### 最终输出与导出

- **FR-020**: 系统必须提供"导出教案"功能,生成符合规定模板格式的Markdown文件
- **FR-021**: 导出的教案必须包含:课程名称、设计理念、三个阶段的完整内容、所有G/U/Q/K/S、驱动性问题、表现性任务、评估量规、PBL学习蓝图
- **FR-022**: 导出的教案必须在每个阶段开头包含说明性引言(如"在此阶段,我们首先明确学习的最终目标...")
- **FR-023**: 系统必须支持导出为PDF格式(可选,建议P3优先级)

#### 项目管理与持久化

- **FR-024**: 系统必须允许用户保存进行中的课程项目,并记录当前所在的模块和已填写的内容
- **FR-025**: 系统必须提供项目列表视图,显示所有用户创建的课程项目(包含标题、创建时间、状态)
- **FR-026**: 用户必须能够删除、复制现有项目
- **FR-027**: 系统必须提供项目搜索功能,支持按课程名称或主题关键词过滤

#### AI智能体角色与Prompt

- **FR-028**: 模块1的AI智能体必须扮演"教学战略家"角色,Prompt强调UbD理论的精准理解
- **FR-029**: 模块2的AI智能体必须扮演"评估设计师"角色,Prompt强调真实情境和PBL任务设计
- **FR-030**: 模块3的AI智能体必须扮演"PBL教学规划师"角色,Prompt强调WHERETO原则和目标对齐

#### 用户引导与反馈

- **FR-031**: 系统必须在用户首次进入每个模块时,显示简短的引导说明(可关闭的浮层或侧边栏)
- **FR-032**: 当AI生成内容时,系统必须显示加载状态和预估时间
- **FR-033**: 当AI生成失败时,系统必须显示具体错误信息,并提供"重新生成"或"手动输入"选项

### Key Entities *(include if feature involves data)*

- **CourseProject**: 课程项目
  - 属性:项目ID、课程名称、课程主题、创建时间、更新时间、当前阶段(1/2/3)、状态(草稿/已完成)
  - 关系:包含一个StageOneData、一个StageTwoData、一个StageThreeData

- **StageOneData**: 阶段一数据(锚定深刻理解)
  - 属性:G(迁移目标)列表、U(持续理解)列表、Q(基本问题)列表、K(知识)列表、S(技能)列表
  - 关系:属于一个CourseProject

- **StageTwoData**: 阶段二数据(设计评估证据)
  - 属性:驱动性问题、表现性任务列表、评估量规列表、其他评估证据列表
  - 关系:属于一个CourseProject、引用StageOneData的G/U/Q/K/S

- **PerformanceTask**: 表现性任务
  - 属性:任务标题、任务描述、真实情境、学生角色、产出物、对应的里程碑周次
  - 关系:属于一个StageTwoData、关联多个UbD目标(G/U/Q/K/S)

- **Rubric**: 评估量规
  - 属性:量规名称、评估维度列表、评分等级(1-5级)、每个维度在每个等级的描述
  - 关系:属于一个PerformanceTask

- **StageThreeData**: 阶段三数据(规划PBL学习体验)
  - 属性:PBL阶段列表(每个阶段包含名称、时长、活动列表)
  - 关系:属于一个CourseProject、引用StageTwoData的表现性任务

- **LearningActivity**: 学习活动
  - 属性:活动标题、活动描述、时长、对应的UbD目标标签、对应的WHERETO原则标签、顺序号
  - 关系:属于一个PBL阶段、关联多个UbD目标(U/S/K)

- **ExportTemplate**: 导出模板
  - 属性:模板名称、模板格式(Markdown/PDF)、章节结构定义
  - 关系:用于生成CourseProject的最终教案文档

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 教师能够在45分钟内(不含阅读和思考时间)完成从输入课程主题到导出完整UbD-PBL教案的全流程
- **SC-002**: AI生成的U(持续理解)中,至少85%符合UbD定义(抽象观点而非具体知识),无需用户手动大幅修改
- **SC-003**: AI生成的驱动性问题中,90%包含真实情境和明确的最终产出物
- **SC-004**: AI生成的PBL学习蓝图中,每个关键活动(至少70%的活动)都标注了对应的UbD目标和WHERETO原则
- **SC-005**: 用户调研显示,80%的新手教师在使用系统后能够正确区分U、K、S的定义和示例
- **SC-006**: 用户调研显示,90%的教师认为导出的教案"结构清晰"且"理论解释有助于理解和执行"(5分制评分≥4分)
- **SC-007**: 生成的教案能够清晰体现UbD逆向设计逻辑和PBL项目驱动特征,经专家评审打分≥4分(5分制)
- **SC-008**: 系统支持至少100个并发用户同时使用,且AI生成响应时间≤15秒(P95)
- **SC-009**: 新用户和专业教师的净推荐值(NPS)≥40分(相比V2版本提升至少15分)
- **SC-010**: 用户能够在3步操作内完成常见任务(如编辑U、导出教案、复制项目)

### Assumptions

1. **AI模型能力**: 假设使用的AI模型(如GPT-4或同等水平)能够理解复杂的教育学概念(UbD、PBL、WHERETO),并生成高质量的教学内容
2. **用户基础知识**: 假设目标用户(教师)对UbD和PBL有基本的了解,或愿意通过系统内的引导说明学习这些概念
3. **内容语言**: 假设主要用户使用中文,UI和AI生成内容默认为中文(可在后续版本扩展多语言)
4. **数据隐私**: 假设用户创建的课程项目可以存储在云端,用户接受标准的隐私政策和数据使用条款
5. **网络连接**: 假设用户在使用系统时有稳定的网络连接,因为AI生成依赖云端服务
6. **设备兼容性**: 假设用户主要通过现代浏览器(Chrome、Firefox、Safari、Edge最新版本)访问系统,响应式设计支持桌面和平板(手机端为次要支持)
7. **导出格式**: 假设Markdown格式对大多数用户足够(可复制到Word、Notion等),PDF导出为可选功能
8. **项目规模**: 假设单个课程项目的内容量在合理范围内(如G/U/Q/K/S各不超过10项,PBL学习蓝图不超过20周),不需要分页或复杂的内容管理


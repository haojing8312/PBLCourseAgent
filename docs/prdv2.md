

### **产品设计文档 (PRD): Project Genesis AI - Phase 2 (Revised)**

**文档版本:** 2.1
**状态:** 规划中
**核心主题:** The Conversational Canvas (对话式创作画布)

---

### **1.0 概述与战略调整 (Overview & Strategic Shift)**

#### **1.1 复盘与现状**
第一阶段的MVP成功验证了产品的核心价值——能够将用户想法转化为结构化的PBL课程方案（JSON）。当前，我们拥有一个功能可用的“后端引擎”。

#### **1.2 第二阶段核心战略**
第二阶段将进行重大战略聚焦。我们的目标不是构建一个SaaS平台，而是打造一个**体验卓越、功能强大的开源桌面端或本地部署应用**。所有功能设计将围绕以下核心原则：
* **无账户，本地优先:** 用户无需登录，所有创作过程在本地会话中完成。
* **体验为王:** 核心是打造流畅、直观、富有启发性的“对话式”创作体验。
* **成果导向:** 产品不仅要产出“方案”，更要产出方案中提到的、可立即使用的“教学资源”。

---

### **2.0 第二阶段目标与成功指标 (Goals & Success Metrics)**

#### **2.1 产品目标**
1.  **打造沉浸式创作流:** 将课程设计从“填表”升级为与AI“共创”的沉浸式体验。
2.  **提升交付物价值:** 产出物从“数据文件(JSON)”升级为“精美文档(Word/PDF)”和“可用教学资源”。
3.  **实现产品可部署性:** 将整个应用打包，让非专业技术用户也能轻松在本地运行。
4.  **奠定开源社区基础:** 发布一个功能强大、体验优越的初始版本，吸引早期贡献者和用户。

#### **2.2 成功指标 (KPIs)**
* **核心功能完成度:** 100%实现PRD中定义的核心功能。
* **社区反馈:** 在代码托管平台（如GitHub）上获得积极的反馈（Stars, Forks, positive issues）。
* **性能体验:** 流式显示的延迟感要极低，用户输入后，AI响应的第一个字符出现时间 < 1.5秒。
* **文档质量:** 用户能够“开箱即用”，根据`README.md`文档成功在本地部署并运行应用。

---

### **3.0 核心功能详述 (Core Features)**

第二阶段的核心是一个统一的功能体——**“对话式创作画布” (The Conversational Canvas)**，它由以下几个关键特性组成：

#### **EPIC 1: 全新交互界面 - “对话式画布”**

* **新增与优化:** 这是本阶段最重要的升级。我们将彻底重构UI，提供一个集对话、生成、预览于一体的创作环境。
* **用户故事:**
    > “我希望能像和ChatGPT聊天一样，在一个独立的会话中，从零开始构思我的PBL课程。我希望我的想法和AI的建议能实时地、漂亮地呈现在一个文档画布上，而不是一堆代码。”
* **功能需求:**
    * **FR-1.1 (会话管理):**
        * 应用启动后即为一个全新的、匿名的**“主题会話 (Theme Session)”**。
        * 提供“开始新会话”按钮，可随时清空当前画布和对话，开启一个新的课程设计。
        * (可选增强) 利用浏览器`localStorage`在本地暂存当前会话，用户关闭浏览器再打开时可恢复上次的创作进度。
    * **FR-1.2 (双栏布局):**
        * **左侧为“对话区”:** 用户在此处与AI进行问答和指令交互。
        * **右侧为“课程方案画布”:** 这是实时的、动态更新的最终成果预览区。
    * **FR-1.3 (流式生成与展示):**
        * 当AI在左侧对话区生成回答时，其内容**必须同步地、以流式（Streaming）效果**渲染到右侧画布的对应位置。这能极大提升用户体验和感知性能。
        * 画布展示的**必须是用户友好**的富文本格式（参考Gemini/ChatGPT的Canvas），包含清晰的标题、段落、列表、表格（用于Rubric）。**严禁在画布上展示任何JSON或代码格式的文本。**
    * **FR-1.4 (画布交互):**
        * 画布上的每个模块（如“驱动性问题”、“评估量规”）应为可聚焦的区域。当用户点击某个模块时，左侧对话区的输入框可以自动填充一个上下文相关的提示，如：“帮我优化一下这个‘驱动性问题’”。

#### **EPIC 2: 核心能力扩展 - “教学资源一键生成”**

* **新增功能:** 在核心方案生成后，利用已有的上下文，继续生成课程中实际需要的教学材料。
* **用户故事:**
    > “太棒了，现在我有了一份完美的课程计划！但我还需要写开场白、给学生的分组指引...我能让AI直接帮我把这些也写出来吗？”
* **功能需求:**
    * **FR-2.1 (上下文延续):** 当右侧画布的核心方案（三大部分）生成完毕后，AI的对话角色自动从“课程设计师”转变为“教学助手”。
    * **FR-2.2 (资源生成指令):** 用户可以在左侧对话区继续下达指令，来生成具体的教学资源。例如：
        * “根据‘项目启动’环节，帮我写一段300字的、能点燃学生热情的开场白。”
        * “为‘技能工坊一’环节，生成一份给学生看的A4大小的快速操作指南(Handout)。”
        * “请为本次课程设计5个课堂互动小游戏。”
    * **FR-2.3 (资源呈现):** 生成的教学资源可以直接追加到右侧画布的末尾，在一个新的“附录：教学资源”大标题下。

#### **EPIC 3: 交付物升级 - “专业级文档导出”与“便捷化部署”**

* **新增与优化:** 提供高质量、兼容性强的文档导出功能，并确保整个应用可以被轻松地在本地部署。
* **功能需求:**
    * **FR-3.1 (导出为Word):**
        * 提供“导出为.docx”按钮。
        * 导出的Word文档需要保持画布上的格式（标题、加粗、列表、表格）。
        * **必须解决中文字体在导出过程中的乱码或格式错乱问题。**
    * **FR-3.2 (导出为PDF):**
        * 提供“导出为.pdf”按钮。
        * PDF应为“矢量格式”，保证打印清晰。
        * 同样，必须确保中文字体能被正确嵌入和显示。
    * **FR-3.3 (应用打包与部署):**
        * 整个应用（前端+后端）将被打包成一个**Docker容器**。
        * 需提供一份极其清晰的`README.md`文档，包含：
            * 项目简介和功能截图。
            * 如何在本地配置LLM的API Key（作为环境变量）。
            * 一行命令即可启动应用的Docker指令（例如 `docker-compose up -d`）。
            * 确保整个部署过程对于一个有基础的开发者来说，不超过10分钟。

---

### **4.0 范围之外 (Out of Scope for Phase 2)**

* **用户账户系统及所有云端同步功能。**
* **RAG及任何外部知识库的集成。**
* **团队协作与分享。**
* **在线支付与商业化功能。**
* **画布内容的富文本在线编辑（可作为后续迭代）。**
{
  "permissions": {
    "allow": [
      "WebSearch",
      "Bash(echo $APPDATA)",
      "Bash(claude config list:*)",
      "Bash(claude mcp:*)",
      "Bash(python -m pip install:*)",
      "Bash(python -m pytest app/tests/test_main.py -v)",
      "Bash(python -m pytest app/tests/test_project_foundation_agent.py -v)",
      "Bash(python -m pytest app/tests/test_assessment_framework_agent.py -v)",
      "Bash(python -m pytest app/tests/test_learning_blueprint_agent.py -v)",
      "Bash(python -m pytest app/tests/test_learning_blueprint_agent.py::TestLearningBlueprintAgent::test_build_user_prompt -v)",
      "Bash(python -m pytest app/tests/test_workflow_service.py -v)",
      "Bash(python -m pytest app/tests/ -v --tb=short)",
      "Bash(python -m pytest:*)",
      "Bash(pytest:*)",
      "Bash(uv sync:*)",
      "Bash(uv run:*)",
      "Bash(uv:*)",
      "Bash(timeout 5 uv run:*)",
      "Bash(timeout :* uv run uvicorn:*)",
      "Bash(cd backend && timeout :* uv run uvicorn:*)",
      "Bash(cat:*)",
      "WebFetch(domain:support.anthropic.com)",
      "Bash(timeout 10 uv run uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload)",
      "WebFetch(domain:support.claude.com)",
      "Bash(curl:*)",
      "Bash(echo $USERPROFILE)",
      "Bash(findstr:*)",
      "Bash(unset:*)",
      "Bash(python:*)",
      "Bash(http://localhost:8001/api/v1/generate)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: 初始化PBLCourseAgent项目\n\n- 重命名项目从Project Genesis AI到PBLCourseAgent\n- 更新产品定位：AI驱动的PBL课程设计助手\n- 完成第一阶段MVP：三Agent工作流系统\n- 设计第二阶段架构：无限画布+任务节点+AI对话\n- 基于tldraw + assistant-ui的现代AI Agent架构\n- 支持画布快照和结构化文档导出\n- 添加完整的项目文档和贡献指南\n\n🤖 Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(npm create:*)",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(npm run dev:*)",
      "Bash(npm run lint)",
      "Bash(npx tsc:*)",
      "Bash(npm run test:*)",
      "Bash(find:*)",
      "Bash(npm uninstall:*)",
      "Bash(timeout 10 uv run:*)",
      "Bash(timeout 15 uv run:*)",
      "Bash(echo $OPENAI_API_KEY)",
      "Bash(git commit:*)",
      "WebFetch(domain:tldraw.dev)",
      "Bash(timeout:*)",
      "Bash(grep:*)",
      "Bash(netstat:*)",
      "Bash(taskkill:*)",
      "Bash(echo $PBL_AI_API_KEY)",
      "WebFetch(domain:github.com)",
      "Bash(git clone:*)",
      "Read(//e/code/yzpd/**)",
      "Bash(claude --resume)",
      "Bash(.venv/Scripts/python.exe -m pytest tests/test_ubd_integration.py -v)",
      "mcp__context7__resolve-library-id",
      "mcp__context7__get-library-docs",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(specify:*)",
      "Bash(.specify/scripts/bash/create-new-feature.sh --json \"## **产品需求文档 (PRD): UbD-PBL 课程架构师 V3**\n\n**版本:** 3\n**作者:** 您的AI产品架构师\n**核心理念:** **用 UbD 的思想，设计 PBL 的课程。** 我们将引导用户首先构建课程的深刻理解目标（UbD），然后将这些目标落地到一个引人入胜的项目式学习（PBL）流程中。\n\n### **1. 愿景与战略 (The Vision)**\n\n**V3 愿景**：将我们的产品从一个线性的PBL流程生成器，升维为一名专业的 **\"\"UbD-PBL 课程架构师\"\"**。它将成为教师的智能教研伙伴，遵循\"\"以终为始\"\"的逆向设计哲学，帮助教师构建出**以深度理解为核心、以项目式学习为载体**的高质量课程。我们不仅提供\"\"做什么\"\"的教学计划，更提供\"\"为什么这么做\"\"的教育学支撑。\n\n### **2. 问题与机遇 (The Problem & Opportunity)**\n\n**当前问题:**\n\n1.  **缺乏理论指导**：当前流程生成的教案是\"\"知其然，而不知其所以然\"\"。用户得到了一个教学流程，但不理解每个环节背后的 UbD 设计思想，导致在实际教学中可能偏离核心目标。\n2.  **设计与实施割裂**：用户心中想的是结合UbD和PBL，但产品流程没有明确体现这种结合，导致设计思路和最终的课程形式看起来是分离的。\n\n**机遇:**\n通过在产品中**内置 UbD 理论指导**并**明确 UbD-PBL 的结合路径**，我们将极大地降低高质量课程设计的门槛。这不仅能吸引追求教学深度的专业教师，也能更好地指导新手教师，从而建立我们产品在教育科技领域的专业壁垒。\n\n### **3. 核心功能与用户流程重构 (The New User Flow)**\n\n整体流程依然遵循逆向设计的四大模块，但在每个模块中都将强化理论指导和PBL导向。\n\n**【V3 新流程】**\n\\`输入\\` -\\> \\`模块1: 锚定深刻理解 (UbD阶段一)\\` -\\> \\`模块2: 设计评估证据 (UbD阶段二)\\` -\\> \\`模块3: 规划PBL学习体验 (UbD阶段三)\\` -\\> \\`输出\\`\n\n-----\n\n#### **模块1: 锚定深刻理解 (The Destination)**\n\n  * **智能体角色**：\"\"教学战略家 (The Strategist)\"\"。\n  * **核心功能增强**:\n    1.  **引导式说明 (UI/UX)**：在 G/U/Q/K/S 每个输入卡片的上方，都有一句**简短、精炼的解释性文字**，告诉用户这一项的意义是什么。例如，在\"\"U: 持续理解\"\"卡片上方，会显示：\"\"*学生在忘记所有细节后，我们希望他们能永恒记住的核心思想或重要观点是什么？*\"\"。\n    2.  **AI生成内容对齐**：AI生成的草稿必须严格符合这些解释的内涵。例如，AI为\"\"U\"\"生成的必须是抽象的观点，而不是具体的知识点。\n\n-----\n\n#### **模块2: 设计评估证据 (The Evidence)**\n\n  * **智能体角色**：\"\"评估设计师 (The Assessor)\"\"。\n  * **核心功能增强**:\n    1.  **PBL导向的任务设计**：AI生成表现性任务时，应明确其**PBL属性**。任务描述应包含真实情境、挑战、角色和最终产出物。AI应生成一个**核心的、贯穿始终的\"\"驱动性问题\"\"**，并将分阶段的表现性任务作为解决这个大问题的关键里程碑。\n          * 例如：**驱动性问题**：\"\"*我们如何利用AI技术，为我们的社区创造一个有价值的解决方案？*\"\"\n          * **表现性任务1（里程碑）**：*提交一份社区问题调研报告和初步的AI解决方案构想。*\n    2.  **内置解释**：在\"\"表现性任务\"\"和\"\"其他评估\"\"板块，同样提供引导性说明，如：\"\"*学生需要通过哪些真实的、情境化的任务来证明他们已经达到了理解目标？*\"\"。\n\n-----\n\n#### **模块3: 规划PBL学习体验 (The Journey)**\n\n  * **智能体角色**：\"\"PBL教学规划师 (The Planner)\"\"。\n  * **核心功能增强**:\n    1.  **明确的PBL架构**：AI生成的学习蓝图不再是简单的逐日计划，而是要明确地按照 **PBL 的经典阶段**（如：项目启动 -\\> 持续探究 -\\> 原型开发 -\\> 测试迭代 -\\> 最终展示）来组织。\n    2.  **保留并整合优势**：将我们原有方案中详细的每日活动安排，**填充**到这个PBL的框架中。**（保留原有优势）**\n    3.  **强化目标关联与理论支撑**：\n          * 每个PBL阶段和关键活动旁边，都要明确标注它所服务的 **UbD 目标 (U/S/K)** 和 **WHERETO 原则**。\n          * 例如：\\`项目启动周：[H-Hook] 邀请企业专家进行讲座，介绍AI在行业中的应用，提出驱动性问题。 (服务于U1, Q1)\\`。\n\n### **4. 最终输出要求 (The Final Deliverable)**\n\n最终生成的教案必须是一个**结构完整、理论清晰、可直接使用**的 UbD-PBL 课程方案。\n\n\\`\\`\\`markdown\n# 课程名称: 0基础AI编程课程\n**设计理念**: 本课程采用\"\"为理解而设计\"\"(UbD)作为核心设计框架，以\"\"项目式学习\"\"(PBL)作为主要的教学实施模式，旨在引导学生在解决真实世界问题的过程中，构建对人工智能技术及其社会影响的深度、持久的理解。\n\n---\n## **阶段一：确定预期学习结果**\n*在此阶段，我们首先明确学习的最终目标。我们问自己：学习结束后，学生应该能够理解什么、知道什么、做到什么？*\n\n### **G: 迁移目标**\n*(学生将能够自主地将所学应用到......)*\n* (由模块1生成的内容)\n\n### **U: 持续理解**\n*(学生将会理解...... 这是我们希望学生能\"\"永恒\"\"记住的核心思想。)*\n* (由模块1生成的内容)\n\n### **Q: 基本问题**\n*(学生将不断思考...... 这些开放性问题将激发探究，并引导学生走向持续理解。)*\n* (由模块1生成的内容)\n\n### **K: 学生应掌握的知识**\n*(作为本单元的学习结果 , 学生将会获得哪些关键知识？)*\n* (由模块1生成的内容)\n\n### **S: 学生应形成的技能**\n*(作为本单元的学习结果 , 学生将会获得哪些关键技能？)*\n* (由模块1生成的内容)\n\n---\n## **阶段二：确定恰当的评估方法**\n*在此阶段，我们设计如何收集学生达成学习目标的证据。我们问：我们如何知道学生是否已经达到了预期结果？*\n\n### **驱动性问题 (PBL核心)**\n* (由模块2生成的、贯穿整个项目的核心挑战问题)\n\n### **表现性任务 (PBL项目里程碑)**\n*(学生通过哪些真实的、分阶段的表现性任务来证明他们的理解？)*\n* (由模块2生成的、有梯度的任务列表)\n\n### **评估量规 (Rubric)**\n*(我们将使用什么标准来评价学生的表现？)*\n* (由模块2生成的、与任务匹配的详细量规)\n\n### **其他评估证据**\n*(在项目过程中，我们还通过哪些方式了解学生的学习进展？)*\n* (由模块2生成的证据清单)\n\n---\n## **阶段三：规划PBL学习体验和教学过程**\n*在明确了目标和评估之后，我们开始规划具体的教学活动。我们遵循WHERETO原则，设计一个引人入胜且有效的PBL学习旅程。*\n\n### **项目学习蓝图**\n* (由模块3生成的、以PBL阶段划分的、带有关联性标签的详细教学活动计划)\n    * **项目启动阶段 (Project Launch)**\n        * ...\n    * **知识与技能构建阶段 (Knowledge & Skill Building)**\n        * ...\n    * **开发与迭代阶段 (Development & Iteration)**\n        * ...\n    * **成果展示与反思阶段 (Presentation & Reflection)**\n        * ...\n\\`\\`\\`\n\n### **5. 成功指标 (Success Metrics)**\n\n1.  **清晰度与可用性**：用户调研反馈，V3生成的教案结构清晰，理论解释有助于他们理解和执行课程。\n2.  **设计保真度**：生成的教案能够清晰体现 UbD 的逆向设计逻辑和 PBL 的项目驱动特征。\n3.  **用户满意度**：新用户和专业教师对产品的推荐意愿（NPS）提升。\" --short-name \"ubd-pbl-architect-v3\")",
      "Bash(.specify/scripts/bash/setup-plan.sh --json)",
      "Bash(.specify/scripts/bash/update-agent-context.sh claude)",
      "Bash(.specify/scripts/bash/check-prerequisites.sh --json)",
      "Bash(.specify/scripts/bash/check-prerequisites.sh --json --require-tasks --include-tasks)",
      "Bash(git rev-parse --git-dir)"
    ],
    "deny": [],
    "ask": []
  }
}
